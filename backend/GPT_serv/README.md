# GPT_serv

Сервис-прокси для взаимодействия веб-сервера Anix Flow с OpenAI API. Предназначен для валидации промптов, кеширования ответов и нормализации формата сценариев.

## Возможности
- FastAPI эндпоинт `POST /scripts` для генерации сценариев.
- Проверка входных данных и ограничение длины промптов.
- Повторные попытки при временных ошибках и кеширование в Redis.
- Единый формат ответа, совместимый с фронтендом Anix Flow.

## Запуск
1. Создайте `.env` на основе [.env.example](./.env.example).
2. Установите зависимости и запустите сервер:
   ```bash
   python -m venv .venv
   source .venv/bin/activate
   pip install -r requirements.txt
   uvicorn app.main:app --host 0.0.0.0 --port 9000 --reload
   ```

## Дополнительно
- В файле `app/services/gpt.py` реализован клиент OpenAI с возможностью подмены на mock.
- В `app/cache.py` (будущий модуль) можно добавить расширенное кеширование и метрики.

> **Важно:** Не коммитьте реальный OpenAI API ключ. Используйте переменные окружения или секреты CI/CD.
